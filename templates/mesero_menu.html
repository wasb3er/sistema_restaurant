{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interfaz Mesero — Restaurant</title>
  <link rel="stylesheet" href="{% static 'mesero_style.css' %}">
</head>
<body>
  <div class="app" role="application">
    <header>
      <h1>Mesero</h1>
      <div class="header-right">
        <div class="chip" id="timer">Tiempo 00:00</div>
        <div class="chip">Garzón: 
          <strong style="margin-left:8px">{{ request.session.empleado_nombre }}</strong>
        </div>
      </div>
    </header>

    <section class="mesas" aria-label="Mapa de mesas">
      <div class="controls">
        <div style="width:220px">
          <input id="search" type="search" placeholder="Buscar mesa o pedido">
        </div>
        <select id="filter">
          <option value="all">Todas</option>
          <option value="libre">Libres</option>
          <option value="ocupado">Ocupadas</option>
          <option value="pedido">Con pedido</option>
        </select>
      </div>
      <div class="mesas-grid" id="mesasGrid"></div>

      <div style="margin-top:14px;display:flex;gap:12px;align-items:center">
        <button class="btn secondary" id="qrBtn">Escanear QR (simulado)</button>
        <button class="btn secondary" id="voiceToggle">Activar voz</button>
        <div class="badge" id="notif">Notificaciones: 0</div>
      </div>

      <div style="margin-top:12px;display:flex;gap:12px">
        <div class="card" style="flex:1">
          <div style="font-weight:600">Reloj de servicio</div>
          <div id="serviceClock" style="font-size:20px;margin-top:8px">00:00:00</div>
        </div>
        <div class="card" style="width:180px">
          <div style="font-weight:600">Mesas atendidas</div>
          <div id="countMesas" style="font-size:20px;margin-top:8px">0</div>
        </div>
      </div>
    </section>

    <aside class="panel" aria-label="Panel de pedido">
      <h2 id="panelTitle">Selecciona una mesa</h2>
      <div class="order-items" id="orderItems">
        <div style="padding:12px;color:var(--muted)">Aquí aparecerán los ítems del pedido.</div>
      </div>
      <div class="totals">
        <div style="font-weight:600">Total</div>
        <div id="totalAmount" style="font-size:20px">$0</div>
      </div>
      <div style="display:flex;gap:10px">
        <button class="btn" id="sendKitchen">Enviar a cocina</button>
        <button class="btn secondary" id="splitBill">Dividir cuenta</button>
        <button class="btn secondary" id="addItem">+ Agregar item</button>
      </div>
      <div style="margin-top:12px;display:flex;gap:8px;align-items:center;color:var(--muted)">
        <label style="font-size:13px">Sugerencias:</label>
        <div id="suggestions" style="flex:1">- Lomos hoy (alto en ventas)</div>
      </div>
    </aside>

    <nav class="bottom-nav" aria-label="Navegación">
      <div class="nav-item">Mesas</div>
      <div class="nav-item">Pedidos</div>
      <div class="nav-item">Cuentas</div>
      <div class="nav-item">Rendim.</div>
    </nav>
  </div>
  <div class="text-center mt-4">
      {% comment %} <a href="{% url 'login_general' %}" class="btn btn-outline-secondary">Cerrar sesión</a> {% endcomment %}
      <a href= "{% url 'logout_por_rol' 'mesero' %}" class="btn btn-outline-secondary">Cerrar sesión</a>
    </div>

  <script src="{% static 'js/mesero_script.js' %}"></script>
</body>
</html>
